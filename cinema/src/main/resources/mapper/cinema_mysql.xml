<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spacrud.cinema.service.CinemaMapper">
    <insert id="cinemaInsert" parameterType="CinemaDTO" useGeneratedKeys="true" keyProperty="id">
        insert into cinema_tbl(name, genre_id, play_time, casts, description, restrict_age)
            values (#{name},
            (select id from genre_tbl where name = #{genre}),
            #{playTime},
            #{casts},
            #{description},
            #{restrictAge})
    </insert>
    <insert id="genreInsert" parameterType="GenreDTO" useGeneratedKeys="true" keyProperty="id">
        insert into genre_tbl(name) values(#{name})
    </insert>
    <select id="allCinema" parameterType="CinemaDTO" resultType="CinemaDTO">

    </select>
    <select id="genreSelect" parameterType="GenreDTO" resultType="GenreDTO">
        select id, name from Genre_tbl where name = #{name}
    </select>

</mapper>